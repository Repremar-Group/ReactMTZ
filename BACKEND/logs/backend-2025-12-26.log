26/12/2025, 16:42:42 [info]: Server running on port 5001
26/12/2025, 16:43:16 [error]: Error conectando a la base de datos: Error: connect ETIMEDOUT 172.212.44.168:3306
    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1607:16)
    --------------------
    at Protocol._enqueue (C:\Users\PatricioGauna\OneDrive - Repremar Logistics S.A\Documentos\GitHub\ReactMTZ\BACKEND\node_modules\mysql\lib\protocol\Protocol.js:144:48)
    at Protocol.handshake (C:\Users\PatricioGauna\OneDrive - Repremar Logistics S.A\Documentos\GitHub\ReactMTZ\BACKEND\node_modules\mysql\lib\protocol\Protocol.js:51:23)
    at Connection.connect (C:\Users\PatricioGauna\OneDrive - Repremar Logistics S.A\Documentos\GitHub\ReactMTZ\BACKEND\node_modules\mysql\lib\Connection.js:116:18)
    at Object.<anonymous> (C:\Users\PatricioGauna\OneDrive - Repremar Logistics S.A\Documentos\GitHub\ReactMTZ\BACKEND\index.js:94:12)
    at Module._compile (node:internal/modules/cjs/loader:1469:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
    at Module.load (node:internal/modules/cjs/loader:1288:32)
    at Module._load (node:internal/modules/cjs/loader:1104:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:174:12)
    at node:internal/main/run_main_module:28:49
26/12/2025, 16:44:03 [info]: Server running on port 5001
26/12/2025, 16:44:03 [info]: ConexiÃ³n exitosa a la base de datos MySQL
26/12/2025, 16:44:10 [info]: Received request for /api/guias-sin-facturar
26/12/2025, 16:44:10 [info]: Received request for /api/facturas-sin-cobrar
26/12/2025, 16:44:10 [info]: Received request for /api/obtenertipocambio
26/12/2025, 16:45:04 [info]: Generando reporte impo:  2024-01-02 2025-12-26 ALL
26/12/2025, 16:45:04 [info]: QUERY REPORTE IMPO: 
      SELECT 
        g.*,
        v.vuelo AS vuelo,

        -- FACTURA NORMAL
        f.NumeroCFE  AS factura_cfe,
        f.idrecibo   AS factura_idrecibo,

        -- FACTURA CUENTA AJENA
        fca.NumeroCFE AS factura_ca_cfe,
        fca.idrecibo  AS factura_ca_idrecibo,

        -- RECIBO (CFE)
        r.numeroDocumentoCFE AS recibo_cfe

      FROM guiasimpo g

      LEFT JOIN vuelos v 
        ON g.nrovuelo = v.idVuelos

      -- Factura normal
      LEFT JOIN facturas f 
        ON f.Id = g.idfactura

      -- Factura cuenta ajena
      LEFT JOIN facturas fca 
        ON fca.Id = g.idfacturacuentaajena

      -- Recibo (prioriza factura normal, si no existe usa CA)
      LEFT JOIN recibos r 
        ON r.idrecibo = COALESCE(f.idrecibo, fca.idrecibo)

      WHERE g.fechavuelo >= ? 
        AND g.fechavuelo <= ?
     ORDER BY g.fechavuelo ASC 2024-01-02,2025-12-26
26/12/2025, 16:46:02 [info]: ParÃ¡metros recibidos: 2024-01-26 2025-12-26  ALL ALL
26/12/2025, 16:46:02 [info]: Query mas parametros reporte expo 
      SELECT 
        g.*, 
        f.NumeroCFE AS numeroFacturaCFE,
        r.numeroDocumentoCFE AS numeroReciboCFE,
        v.vuelo AS vuelo,
        v.compania AS compania
      FROM guiasexpo g
      LEFT JOIN facturas f ON g.idfactura = f.Id
      LEFT JOIN recibos r ON f.idrecibo = r.idrecibo
      LEFT JOIN vuelos v ON g.nrovuelo = v.idVuelos
      WHERE DATE(g.fechavuelo) BETWEEN ? AND ?
     ORDER BY g.fechaingresada DESC 2024-01-26,2025-12-26
26/12/2025, 16:50:27 [info]: ParÃ¡metros recibidos: [object Object]
26/12/2025, 16:54:36 [info]: ParÃ¡metros recibidos: [object Object]
26/12/2025, 17:01:06 [info]: Received request for /api/facturas-sin-cobrar
26/12/2025, 17:01:06 [info]: Received request for /api/obtenertipocambio
26/12/2025, 17:01:06 [info]: Received request for /api/guias-sin-facturar
26/12/2025, 17:01:33 [info]: Server running on port 5001
26/12/2025, 17:01:34 [info]: ConexiÃ³n exitosa a la base de datos MySQL
26/12/2025, 17:01:34 [info]: Received request for /api/guias-sin-facturar
26/12/2025, 17:01:34 [info]: Received request for /api/facturas-sin-cobrar
26/12/2025, 17:01:34 [info]: Received request for /api/obtenertipocambio
26/12/2025, 17:01:37 [info]: âœ” Cotizaciones generales: {
  "procesoCargarCotizacionesBcuResultado": {
    "resultado": "1",
    "descripcion": "Cotizaciones ingresadas correctamente",
    "datos": ""
  }
}
26/12/2025, 17:01:37 [info]: ðŸ’² CotizaciÃ³n moneda 2: {
  "obtenerCotizacionResultado": {
    "resultado": "1",
    "descripcion": "Se encontro la cotizaciÃ³n con los criterios indicados",
    "datos": {
      "cotizacion": "39.246"
    }
  }
}
26/12/2025, 17:01:37 [info]: Received request for /api/agregartipocambio
26/12/2025, 17:01:51 [info]: ParÃ¡metros recibidos: [object Object]
26/12/2025, 17:03:37 [info]: ParÃ¡metros recibidos: [object Object]
26/12/2025, 17:04:50 [info]: reportedeembarquependiente, ParÃ¡metros recibidos: [object Object]
26/12/2025, 17:06:11 [info]: reportedeembarquependiente, ParÃ¡metros recibidos: [object Object]
26/12/2025, 17:07:46 [info]: reportedeembarquependiente, ParÃ¡metros recibidos: [object Object]
26/12/2025, 17:13:12 [info]: Server running on port 5001
26/12/2025, 17:13:14 [info]: reportedeembarquependiente, ParÃ¡metros recibidos: [object Object]
26/12/2025, 17:13:23 [info]: ConexiÃ³n exitosa a la base de datos MySQL
26/12/2025, 17:15:55 [info]: Received request for /api/obtenertipocambioparacomprobante
26/12/2025, 17:16:00 [info]: Received request for /api/obtenerembarques
26/12/2025, 17:16:00 [info]: [object Object],[object Object],[object Object],[object Object]
26/12/2025, 17:16:06 [info]: 39.246
26/12/2025, 17:17:45 [info]: reportedeembarquependiente, ParÃ¡metros recibidos: [object Object]
26/12/2025, 17:21:51 [info]: Received request for /api/guias-sin-facturar
26/12/2025, 17:21:51 [info]: Received request for /api/facturas-sin-cobrar
26/12/2025, 17:21:51 [info]: Received request for /api/obtenertipocambio
26/12/2025, 17:21:53 [info]: Received request for /api/previewguias
26/12/2025, 17:21:53 [info]: Received request for /api/previewguiasexpo
26/12/2025, 17:22:00 [info]: REPREMAR LOGISTICS S.A.
26/12/2025, 17:22:04 [info]: PROSEGUR URUGUAY S.A
26/12/2025, 17:22:06 [info]: REPREMAR LOGISTICS S.A.
26/12/2025, 17:22:18 [info]: Repremar SA
26/12/2025, 17:24:04 [info]: Received request for /api/previewfacturas
26/12/2025, 17:30:36 [info]: Server running on port 5001
26/12/2025, 17:30:37 [info]: ConexiÃ³n exitosa a la base de datos MySQL
26/12/2025, 17:30:45 [info]: Received request for /api/previewguias
26/12/2025, 17:30:45 [info]: Received request for /api/previewguiasexpo
26/12/2025, 17:32:15 [info]: Received request for /api/previewguias
26/12/2025, 17:32:15 [info]: Received request for /api/previewguiasexpo
26/12/2025, 17:32:37 [info]: Received request for /api/previewguias
26/12/2025, 17:32:37 [info]: Received request for /api/previewguiasexpo
26/12/2025, 17:32:41 [info]: Repremar SA
26/12/2025, 17:33:02 [info]: Repremar SA
26/12/2025, 17:33:16 [info]: Repremar SA
26/12/2025, 17:33:32 [info]: Received request for /api/previewclientes
26/12/2025, 17:33:43 [info]: Received request for /api/obtenerclientes/5807
26/12/2025, 17:33:43 [info]: Cliente encontrado: [object Object]
26/12/2025, 17:33:51 [info]: Received request for /api/previewclientes
26/12/2025, 17:33:52 [info]: Received request for /api/obtenerclientes/5807
26/12/2025, 17:33:53 [info]: Cliente encontrado: [object Object]
26/12/2025, 17:33:59 [info]: 
ðŸ“¤ Enviando XML para cliente "REPREMAR LOGISTICS S.A":
 
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap/">
  <soapenv:Header/>
  <soapenv:Body>
    <soap:modificarElemento>
      <xmlParametros>
        <![CDATA[
<modificarElementoParametros>
  <usuario>IT</usuario>
  <usuarioPassword>R3pr3m4r</usuarioPassword>
  <empresa>REP</empresa>
  <elemento>
    <codigo>11310359</codigo>
    <nombre>REPREMAR LOGISTICS S.A</nombre>
    <habilitado>S</habilitado>
    <conjuntos>
      <conjunto>CLI</conjunto>
    </conjuntos>
    <atributos>
      <atributo><campo>DIR</campo><valor>Misiones 1372 of. 602</valor></atributo>
      <atributo><campo>TDOCDGI</campo><valor>2</valor></atributo>
      <atributo><campo>RUC</campo><valor>214055710010</valor></atributo> <atributo><campo>CI</campo><valor></valor></atributo>
      <atributo><campo>PAIS</campo><valor>URUGUAY</valor></atributo>
      <atributo><campo>TEL</campo><valor></valor></atributo>
      <atributo><campo>RAZON</campo><valor>REPREMAR LOGISTICS S.A</valor></atributo>
      <atributo><campo>EMAIL</campo><valor>pgauna@repremar.com</valor></atributo>
      <atributo><campo>LOC</campo><valor>MONTEVIDEO</valor></atributo>
      <atributo><campo>CIUDAD</campo><valor>MONTEVIDEO</valor></atributo>
    </atributos>
  </elemento>
</modificarElementoParametros>
        ]]>
      </xmlParametros>
    </soap:modificarElemento>
  </soapenv:Body>
</soapenv:Envelope>
26/12/2025, 17:33:59 [info]: XML MODIFICAR A SOAP 
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap/">
  <soapenv:Header/>
  <soapenv:Body>
    <soap:modificarElemento>
      <xmlParametros>
        <![CDATA[
<modificarElementoParametros>
  <usuario>IT</usuario>
  <usuarioPassword>R3pr3m4r</usuarioPassword>
  <empresa>REP</empresa>
  <elemento>
    <codigo>11310359</codigo>
    <nombre>REPREMAR LOGISTICS S.A</nombre>
    <habilitado>S</habilitado>
    <conjuntos>
      <conjunto>CLI</conjunto>
    </conjuntos>
    <atributos>
      <atributo><campo>DIR</campo><valor>Misiones 1372 of. 602</valor></atributo>
      <atributo><campo>TDOCDGI</campo><valor>2</valor></atributo>
      <atributo><campo>RUC</campo><valor>214055710010</valor></atributo> <atributo><campo>CI</campo><valor></valor></atributo>
      <atributo><campo>PAIS</campo><valor>URUGUAY</valor></atributo>
      <atributo><campo>TEL</campo><valor></valor></atributo>
      <atributo><campo>RAZON</campo><valor>REPREMAR LOGISTICS S.A</valor></atributo>
      <atributo><campo>EMAIL</campo><valor>pgauna@repremar.com</valor></atributo>
      <atributo><campo>LOC</campo><valor>MONTEVIDEO</valor></atributo>
      <atributo><campo>CIUDAD</campo><valor>MONTEVIDEO</valor></atributo>
    </atributos>
  </elemento>
</modificarElementoParametros>
        ]]>
      </xmlParametros>
    </soap:modificarElemento>
  </soapenv:Body>
</soapenv:Envelope>
26/12/2025, 17:34:00 [info]: Respuesta cruda SOAP <modificarElementoResultado>
    <resultado>1</resultado>
    <descripcion>Elemento '11310359-REPREMAR LOGISTICS S.A' modificado correctamente</descripcion>
    <datos>
        <elemento>
            <empresa>REP</empresa>
            <codigo>11310359</codigo>
        </elemento>
    </datos>
</modificarElementoResultado>
26/12/2025, 17:34:00 [info]: Received request for /api/previewclientes
26/12/2025, 17:34:02 [info]: Received request for /api/obtenerclientes/5458
26/12/2025, 17:34:02 [info]: Cliente encontrado: [object Object]
26/12/2025, 17:34:06 [info]: 
ðŸ“¤ Enviando XML para cliente "REPREMAR LOGISTICS S.A.":
 
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap/">
  <soapenv:Header/>
  <soapenv:Body>
    <soap:modificarElemento>
      <xmlParametros>
        <![CDATA[
<modificarElementoParametros>
  <usuario>IT</usuario>
  <usuarioPassword>R3pr3m4r</usuarioPassword>
  <empresa>REP</empresa>
  <elemento>
    <codigo>11310002</codigo>
    <nombre>REPREMAR LOGISTICS S.A.</nombre>
    <habilitado>S</habilitado>
    <conjuntos>
      <conjunto>CLI</conjunto>
    </conjuntos>
    <atributos>
      <atributo><campo>DIR</campo><valor>MISIONES 1372 OF.602</valor></atributo>
      <atributo><campo>TDOCDGI</campo><valor>2</valor></atributo>
      <atributo><campo>RUC</campo><valor>214055710010</valor></atributo> <atributo><campo>CI</campo><valor></valor></atributo>
      <atributo><campo>PAIS</campo><valor>URUGUAY</valor></atributo>
      <atributo><campo>TEL</campo><valor></valor></atributo>
      <atributo><campo>RAZON</campo><valor>REPREMAR LOGISTICS S.A.</valor></atributo>
      <atributo><campo>EMAIL</campo><valor>pgauna@repremar.com</valor></atributo>
      <atributo><campo>LOC</campo><valor>MONTEVIDEO</valor></atributo>
      <atributo><campo>CIUDAD</campo><valor>MONTEVIDEO</valor></atributo>
    </atributos>
  </elemento>
</modificarElementoParametros>
        ]]>
      </xmlParametros>
    </soap:modificarElemento>
  </soapenv:Body>
</soapenv:Envelope>
26/12/2025, 17:34:06 [info]: XML MODIFICAR A SOAP 
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap/">
  <soapenv:Header/>
  <soapenv:Body>
    <soap:modificarElemento>
      <xmlParametros>
        <![CDATA[
<modificarElementoParametros>
  <usuario>IT</usuario>
  <usuarioPassword>R3pr3m4r</usuarioPassword>
  <empresa>REP</empresa>
  <elemento>
    <codigo>11310002</codigo>
    <nombre>REPREMAR LOGISTICS S.A.</nombre>
    <habilitado>S</habilitado>
    <conjuntos>
      <conjunto>CLI</conjunto>
    </conjuntos>
    <atributos>
      <atributo><campo>DIR</campo><valor>MISIONES 1372 OF.602</valor></atributo>
      <atributo><campo>TDOCDGI</campo><valor>2</valor></atributo>
      <atributo><campo>RUC</campo><valor>214055710010</valor></atributo> <atributo><campo>CI</campo><valor></valor></atributo>
      <atributo><campo>PAIS</campo><valor>URUGUAY</valor></atributo>
      <atributo><campo>TEL</campo><valor></valor></atributo>
      <atributo><campo>RAZON</campo><valor>REPREMAR LOGISTICS S.A.</valor></atributo>
      <atributo><campo>EMAIL</campo><valor>pgauna@repremar.com</valor></atributo>
      <atributo><campo>LOC</campo><valor>MONTEVIDEO</valor></atributo>
      <atributo><campo>CIUDAD</campo><valor>MONTEVIDEO</valor></atributo>
    </atributos>
  </elemento>
</modificarElementoParametros>
        ]]>
      </xmlParametros>
    </soap:modificarElemento>
  </soapenv:Body>
</soapenv:Envelope>
26/12/2025, 17:34:06 [info]: Respuesta cruda SOAP <modificarElementoResultado>
    <resultado>1</resultado>
    <descripcion>Elemento '11310002-REPREMAR LOGISTICS S.A.' modificado correctamente</descripcion>
    <datos>
        <elemento>
            <empresa>REP</empresa>
            <codigo>11310002</codigo>
        </elemento>
    </datos>
</modificarElementoResultado>
26/12/2025, 17:34:06 [info]: Received request for /api/previewclientes
26/12/2025, 17:34:09 [info]: Received request for /api/previewguias
26/12/2025, 17:34:09 [info]: Received request for /api/previewguiasexpo
26/12/2025, 17:34:12 [info]: REPREMAR LOGISTICS S.A.
26/12/2025, 17:46:56 [info]: Received request for /api/previewguias
26/12/2025, 17:46:56 [info]: Received request for /api/previewguiasexpo
26/12/2025, 17:47:04 [info]: REPREMAR LOGISTICS S.A.
